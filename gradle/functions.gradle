import java.time.Instant

ext {
	epochNanoOf = { final Instant instant ->
		return instant.epochSecond * 1_000_000_000L + instant.nano
	}

	fabricApiModule = { final def module ->
		return fabricApi.module(module, project.fabric_version)
	}

	globalNanoTime = { ->
		return epochNanoOf(Instant.now())
	}

	isAlpha = { ->
		return !System.env.RELEASE_TYPE || System.env.RELEASE_TYPE == 'alpha'
	}

	nonnegative = { final int i ->
		return i < 0 ? 0 : i
	}

	paddedHexString = { final long l ->
		return padLeft((int) '0', 16, Long.toHexString(l));
	}

	padLeft = { final int ch = ' ', final int pad, final String s ->
		final String padding = ch.toString().repeat(nonnegative(pad - s.length()))

		return padding + s;
	}

	titleCased = { final String text ->
		final char[] textTitleCased = new char[text.size()]
		boolean titleCase = true

		for (int i = 0; i < text.size(); i++) {
			char ch = text.charAt i

			if (!Character.isWhitespace(ch)) {
				if (titleCase) {
					ch = Character.toTitleCase ch
					titleCase = false
				}

				textTitleCased[i] = ch
			} else {
				titleCase = true
			}
		}

		return String.valueOf(textTitleCased)
	}
}
