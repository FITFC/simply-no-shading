plugins {
	id 'fabric-loom' version '1.+'
	id 'io.github.juuxel.loom-quiltflower' version 'latest.release'
}

apply from: 'mods.gradle'

javaVersion = 17 // Minecraft 1.18 (1.18-pre2) upwards uses Java 17.
loader = 'fabric'
gameVersion = '1.19

group = 'com.github.startsmercury'
archivesBaseName = 'simply-no-shading'
version = "4.0.2+$gameVersion"

repositories {
	maven { url 'https://api.modrinth.com/maven'; content { includeGroup 'maven.modrinth' } }
	maven { url 'https://jitpack.io' }
	maven { url 'https://maven.gegy.dev' }
	maven { url 'https://maven.parchmentmc.org' }
	maven { url 'https://maven.quiltmc.org/repository/release' }
	maven { url 'https://maven.shedaniel.me' }
	maven { url 'https://maven.terraformersmc.com' }
	maven { url 'https://storage.googleapis.com/devan-maven' }
}

dependencies {
	testCompileOnly gradleApi()

	// BedrockIfy
	modImplementation modrinth.latestDependency('bedrockify')

	// Enhanced Block Entities
	modImplementation modrinth.latestDependency('ebe')

	// Fabric Key Binding API (V1)
	modImplementation fabricApi.module('fabric-key-binding-api-v1')

	// Fabric Lifecycle Events (V1)
	modImplementation fabricApi.module('fabric-lifecycle-events-v1')

	// Fabric Renderer API (V1)
	modImplementation fabricApi.module('fabric-renderer-api-v1')

	// Fabric Loader
	modImplementation 'net.fabricmc:fabric-loader:latest.release'

	// Iris
	modImplementation modrinth.latestDependency('iris')

	// Layered Mappings
	mappings loom.layered {
		officialMojangMappings()
		parchment parchment.latestDependency()
	}

	// Minecraft
	minecraft "com.mojang:minecraft:$gameVersion"

	// ModMenu
	modImplementation modrinth.latestDependency('modmenu')

	// Sodium
	modImplementation modrinth.latestDependency('sodium')

	// SpruceUI
	modImplementation include('dev.lambdaurora:spruceui:4.0.+')
}

processResources {
	inputs.property 'version', version

	filesMatching 'fabric.mod.json', {
		expand version: version
	}
}

java {
	withJavadocJar()
	withSourcesJar()
}

jar {
	from 'LICENSE', {
		rename { "${it}_$project.archivesBaseName" }
	}
}

sourceCompatibility = javaVersion
targetCompatibility = javaVersion

tasks.withType JavaCompile configureEach {
	options.release = project.ext.javaVersion
}
