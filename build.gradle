plugins {
	alias libs.plugins.fabric.loom
}

sourceCompatibility = JavaVersion.VERSION_17
targetCompatibility = sourceCompatibility

group = mod_group
archivesBaseName = mod_name
version = mod_version

repositories {
}

dependencies {
	modImplementation libs.fabric.loader
	// compileOnly fabricApi.module('fabric-renderer-indigo', libs.versions.fabric.api.get())
	runtimeOnly libs.fernflower
	minecraft libs.minecraft
	mappings loom.officialMojangMappings()
}

processResources {
	inputs.property 'version', version

	filesMatching 'fabric.mod.json', {
		expand 'loader_version': libs.versions.fabric.loader.get(),
		       'java_version': sourceCompatibility,
		       'fabric_version': libs.versions.fabric.api.get(),
		       'minecraft_version': libs.versions.minecraft.get(),
		       'version': version
	}
}

java {
	withSourcesJar()
}

jar {
	from 'LICENSE', {
		rename { "${it}_${project.archivesBaseName}" }
	}
}

tasks.withType(JavaCompile).configureEach {
	it.options.release = sourceCompatibility as int
}
